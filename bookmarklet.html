<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>Tabify Textareas Bookmarklet</title>
	<style type="text/css">
	body {
	  font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
	  color: black;
	  background: white none;
	}
	.tip {
	  color: #888;
	}
	.bml {
	  padding: .2em .4em;
	  display: inline-block;
	  margin-right: 0.4em;
	  text-decoration: none;
	  color: black;
	  border-radius: 1em;
	  background: #ddd;
	  background: #ddd -moz-linear-gradient(#eee, #ccc);
	  background: #ddd -webkit-linear-gradient(#eee, #ccc);
	  background: #ddd linear-gradient(#eee, #ccc);
	}
</style>
</head>
<body>
	
	<h1>Tabify Textareas Bookmarklet</h1>
	<a class="bml" href="javascript:(function(){  function allowTabbing(){   (function(d){d.fn.tabby=function(f){var g=d.extend({},d.fn.tabby.defaults,f);var h=d.fn.tabby.pressed;return this.each(function(){$this=d(this);var i=d.meta?d.extend({},g,$this.data()):g;$this.bind(&quot;keydown&quot;,function(k){var j=d.fn.tabby.catch_kc(k);if(16==j){h.shft=true}if(17==j){h.ctrl=true;setTimeout(&quot;$.fn.tabby.pressed.ctrl = false;&quot;,1000)}if(18==j){h.alt=true;setTimeout(&quot;$.fn.tabby.pressed.alt = false;&quot;,1000)}if(9==j&amp;&amp;!h.ctrl&amp;&amp;!h.alt){k.preventDefault;h.last=j;setTimeout(&quot;$.fn.tabby.pressed.last = null;&quot;,0);e(d(k.target).get(0),h.shft,i);return false}}).bind(&quot;keyup&quot;,function(j){if(16==d.fn.tabby.catch_kc(j)){h.shft=false}}).bind(&quot;blur&quot;,function(j){if(9==h.last){d(j.target).one(&quot;focus&quot;,function(k){h.last=null}).get(0).focus()}})})};d.fn.tabby.catch_kc=function(f){return f.keyCode?f.keyCode:f.charCode?f.charCode:f.which};d.fn.tabby.pressed={shft:false,ctrl:false,alt:false,last:null};function b(f){if(window.console&amp;&amp;window.console.log){window.console.log(&quot;textarea count: &quot;+f.size())}}function e(i,h,g){var f=i.scrollTop;if(i.setSelectionRange){a(i,h,g)}else{if(document.selection){c(i,h,g)}}i.scrollTop=f}d.fn.tabby.defaults={tabString:String.fromCharCode(9)};function a(j,f,u){var t=j.selectionStart;var r=j.selectionEnd;if(t==r){if(f){if(t-u.tabString==j.value.substring(t-u.tabString.length,t)){j.value=j.value.substring(0,t-u.tabString.length)+j.value.substring(t);j.focus();j.setSelectionRange(t-u.tabString.length,t-u.tabString.length)}else{if(t-u.tabString==j.value.substring(t,t+u.tabString.length)){j.value=j.value.substring(0,t)+j.value.substring(t+u.tabString.length);j.focus();j.setSelectionRange(t,t)}}}else{j.value=j.value.substring(0,t)+u.tabString+j.value.substring(t);j.focus();j.setSelectionRange(t+u.tabString.length,t+u.tabString.length)}}else{var v=j.value.split(&quot;\n&quot;);var s=new Array();var l=0;var h=0;var g=false;for(var n in v){h=l+v[n].length;s.push({start:l,end:h,selected:(l&lt;=t&amp;&amp;h&gt;t)||(h&gt;=r&amp;&amp;l&lt;r)||(l&gt;t&amp;&amp;h&lt;r)});l=h+1}var k=0;for(var n in s){if(s[n].selected){var q=s[n].start+k;if(f&amp;&amp;u.tabString==j.value.substring(q,q+u.tabString.length)){j.value=j.value.substring(0,q)+j.value.substring(q+u.tabString.length);k-=u.tabString.length}else{if(!f){j.value=j.value.substring(0,q)+u.tabString+j.value.substring(q);k+=u.tabString.length}}}}j.focus();var p=t+((k&gt;0)?u.tabString.length:(k&lt;0)?-u.tabString.length:0);var m=r+k;j.setSelectionRange(p,m)}}function c(q,w,f){var p=document.selection.createRange();if(q==p.parentElement()){if(&quot;&quot;==p.text){if(w){var l=p.getBookmark();p.moveStart(&quot;character&quot;,-f.tabString.length);if(f.tabString==p.text){p.text=&quot;&quot;}else{p.moveToBookmark(l);p.moveEnd(&quot;character&quot;,f.tabString.length);if(f.tabString==p.text){p.text=&quot;&quot;}}p.collapse(true);p.select()}else{p.text=f.tabString;p.collapse(false);p.select()}}else{var k=p.text;var n=k.length;var u=k.split(&quot;\r\n&quot;);var z=document.body.createTextRange();z.moveToElementText(q);z.setEndPoint(&quot;EndToStart&quot;,p);var m=z.text;var x=m.split(&quot;\r\n&quot;);var r=m.length;var y=document.body.createTextRange();y.moveToElementText(q);y.setEndPoint(&quot;StartToEnd&quot;,p);var v=y.text;var g=document.body.createTextRange();g.moveToElementText(q);g.setEndPoint(&quot;StartToEnd&quot;,z);var s=g.text;var h=d(q).html();d(&quot;#r3&quot;).text(r+&quot; + &quot;+n+&quot; + &quot;+v.length+&quot; = &quot;+h.length);if((r+s.length)&lt;h.length){x.push(&quot;&quot;);r+=2;if(w&amp;&amp;f.tabString==u[0].substring(0,f.tabString.length)){u[0]=u[0].substring(f.tabString.length)}else{if(!w){u[0]=f.tabString+u[0]}}}else{if(w&amp;&amp;f.tabString==x[x.length-1].substring(0,f.tabString.length)){x[x.length-1]=x[x.length-1].substring(f.tabString.length)}else{if(!w){x[x.length-1]=f.tabString+x[x.length-1]}}}for(var t=1;t&lt;u.length;t++){if(w&amp;&amp;f.tabString==u[t].substring(0,f.tabString.length)){u[t]=u[t].substring(f.tabString.length)}else{if(!w){u[t]=f.tabString+u[t]}}}if(1==x.length&amp;&amp;0==r){if(w&amp;&amp;f.tabString==u[0].substring(0,f.tabString.length)){u[0]=u[0].substring(f.tabString.length)}else{if(!w){u[0]=f.tabString+u[0]}}}if((r+n+v.length)&lt;h.length){u.push(&quot;&quot;);n+=2}z.text=x.join(&quot;\r\n&quot;);p.text=u.join(&quot;\r\n&quot;);var j=document.body.createTextRange();j.moveToElementText(q);if(0&lt;r){j.setEndPoint(&quot;StartToEnd&quot;,z)}else{j.setEndPoint(&quot;StartToStart&quot;,z)}j.setEndPoint(&quot;EndToEnd&quot;,p);j.select()}}}})(window.jQuery);   window.jQuery('textarea').tabby({tabString:'    '}); }  function allowTabbingWhenPossible() {   if(window.jQuery){     allowTabbing();   } else {     window.setTimeout(allowTabbingWhenPossible, 100);   } }  if(window.jQuery) {   allowTabbing(); }else{   var s=document.createElement('script');   s.setAttribute('src','http://code.jquery.com/jquery-1.5.2.min.js');   document.getElementsByTagName('body')[0].appendChild(s);   allowTabbingWhenPossible(); }   })();">Tabify Textareas</a> <span class="tip">‚Üê&nbsp;Drag to your bookmark bar!</span>
	
	<br /><br />
	<textarea name="textarea" rows="4" cols="100" wrap="wrap">Try Me Out
	  
Click the bookmarklet and then use tabs within this textarea!
</textarea>
</body>
</html>